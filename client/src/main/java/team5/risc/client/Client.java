/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package team5.risc.client;

import team5.risc.common.*;

import java.net.*;
import java.io.*;
import java.nio.*;

import java.nio.ByteBuffer;
import java.nio.channels.SelectionKey;
import java.nio.channels.Selector;
import java.nio.channels.ServerSocketChannel;
import java.nio.channels.SocketChannel;
import java.io.IOException;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;
import java.util.concurrent.BlockingQueue;
import java.util.concurrent.LinkedBlockingQueue;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.ThreadPoolExecutor;
import java.io.PrintWriter;
import java.util.Scanner;
import java.util.ArrayList;

public class Client {

  public static void main(String[] args) throws UnknownHostException, IOException, ClassNotFoundException {
    Socket client = new Socket("127.0.0.1", 1651);
    System.out.println(client.getRemoteSocketAddress());
    
    ObjectOutputStream objectOutputStream = new ObjectOutputStream(client.getOutputStream());
    ObjectInputStream objectInputStream = new ObjectInputStream(client.getInputStream());
    
    DataOutputStream dataOutputStream = 
      new DataOutputStream(client.getOutputStream());
    DataInputStream dataInputStream = 
      new DataInputStream(client.getInputStream());
            
    Map map = (Map) objectInputStream.readObject();
    System.out.println("Server->Client Map:"+map);
    
    objectOutputStream.writeObject(map);
    
    objectOutputStream.flush();

    Integer i = dataInputStream.readInt();
    System.out.println("Server->Client integer:"+i);
    dataOutputStream.writeUTF("hello");

    objectInputStream.close();
    objectOutputStream.close();
    client.close();

    //display map
    Display txt = new TextDisplay();
    txt.display(map, System.out);
    
  }
}
